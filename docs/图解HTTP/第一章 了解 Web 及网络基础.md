---
title: 【图解 HTTP】第一章 了解 Web 及网络基础
date: 2020-02-22
categories:
 - HTTP
tags:
 - HTTP
 - 网络
---

## 使用 HTTP 访问 Web

​		Web 是建立在 HTTP 协议上通信的。



## HTTP 的诞生

### 为知识共享而规划的 Web

​		现在有三项 WWW 构建技术：

- 把 SGML（标准通用标记语言）作为页面的文本标记语言的 HTML。
- 作为文档传输协议的 HTTP。
- 指定文档所在地址的 URL。

### Web 成长时代

- 1990年，第一台 Web 服务器和浏览器出现。
- 1992年，日本第一个网站主页上线。
- 1994年，网景发布 Netscape Navigator 1.0 。
- 1995年，微软发布 Internet Explorer 1.0 。随后 Apache 2.0 出现、HTML 发布 2.0 版本。

### 驻足不前的 HTTP

- 1990年，HTTP 问世，由于没有正式标准，被称为 HTTP/0.9。
- 1996年5月，HTTP/1.0 正式发布。
- 1997年1月，HTTP/1.1 正式发布。是目前主流的 HTTP 协议版本。



## 网络基础 TCP/IP

​		通常使用的网络是在 TCP/IP 协议族的基础上运作的，HTTP 属于它内部的一个子集。

### TCP/IP 协议族

​		计算机与网络设备要互相通行，双方就必须基于相同的方法。比如，如何探测到通信目标、由哪一边先发起通信、使用哪种语言进行通信、怎样结束通信等规则都需要事先确定。不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则。我们把这种规则称为协议（protocol）。

​		协议中存在各式各样的内容。从电缆的规格到 IP 地址的选定方法、寻找异地用户的方法、双方建立通信的顺序，以及 Web 页面显示需要处理的步骤， 等等。

​		像这样把与互联网相关联的协议集合起来总称为 TCP/IP。也有说法认为，TCP/IP 是指 TCP 和 IP这两种协议。还有一种说法认为，TCP/IP 是在 IP 协议的通信过程中，使用到的协议族的统称。

### TCP/IP 的分层管理

​		TCP/IP 协议族按层次分别分为以下 4 层：应用层、传输层、网络层、数据链路层。

​		分层的好处：某个地方需要改变设计时，只需要把变动的层替换掉即可；设计也变得相对简单。

​		各层作用如下：

- 应用层。应用层决定了向用户提供应用服务时通信的活动。TCP/IP 协议族内预存了各类通用的应用服务。比如 FTP（File Transfer Protocol）、DNS（Domain Name System）等。HTTP 协议也处于改层。

- 传输层。传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。该层有两个性质不同的协议：TCP（Transmission Control Protocol）、UDP（User Data Protocol）。

- 网络层（又称网络互连层）。网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的路径（传输路线）到达对方计算机，并把数据包传送给对方。

    与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线。

- 链路层（又称数据链路层、网络接口层）。用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC（Network Interface Card，网络适配器，即网卡），及光纤等物理可见部分（还包括连接器等一切传输媒介）。硬件上的范畴均在链路层的作用范围之内。

### TCP/IP 通信传输流

​		利用 TCP/IP 协议族进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端从链路层往上走。

​		用 HTTP 举例来说明：

1. 作为发送端的客户端在应用层（HTTP 协议）发出一个想看某个 Web 页面的 HTTP 请求。
2. 为了传输方便，在传输层（TCP 协议）把从应用层收到的数据（HTTP 请求报文）进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。
3. 在网络层（IP 协议），增加作为通信目的地的 MAC 地址后转发给链路层。这样一来，发往网络的通信请求就准备齐全了。
4. 接收端的服务器在链路层接收到数据，按顺序往上层发送，一直到应用层。当传输到应用层，才能算真正接收到由客户端发送过来的 HTTP 请求。

​        发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。

​		这种把数据信息包装起来的做法称为封装（encapsulate）。

​		各层添加的首部如下：

- 传输层：TCP 首部。
- 网络层：IP 首部。
- 链路层：以太网首部。



## 与 HTTP 关系密切的协议：IP、TCP、DNS

### 负责传输的 IP 协议

​		IP（Internet Protocol）网际协议位于网络层，几乎所有使用网络的系统都会用到 IP 协议。

​		IP 协议的作用是把各种数据包传送给对方。要保证确实传送到对方那里，最重要的两个条件是 IP 地址和 MAC 地址（Media Access Control Address）。

​		IP 地址指明了节点被分配到的地址，MAC 地址是指网卡所属的固定地址。IP 地址可以和 MAC 地址进行配对。IP 地址可变换，但 MAC 地址基本上不会更改。

#### 使用 ARP 协议凭借 MAC 地址进行通信

​		IP 间的通信依赖 MAC 地址。在网络上，通信的双方在同一局域网（LAN）内的情况很少，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的 MAC 地址来搜索下一个中转目标。这时，会采用 ARP 协议（Address Resolution Protocol）。ARP 是一种用来解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。

#### 没有人能够全面掌握互联网中的传输状况

​		在到达通信目标前的中转过程中，那些计算机和路由器等网络设备只能获悉很粗略的传输路线。

​		这种机制称为路由选择（routing），优点像快递公司的送货过程。想要寄快递的人，只要将自己的货物送到集散中心，就可以知道快递公司是否肯收件发货，该快递公司的集散中心检查货物的送达地址，明确下站该送往哪个区域的集散中心。接着，那个区域的集散中心会自动判断是否能送到对方的家中。

### 确保可靠性的 TCP 协议

​		按层次分，TCP 位于传输层，提供可靠的字节流服务。

​		所谓字节流服务（Byte Stream Service）是指，为了方便传输，将大块数据分隔成 以报文段（segment）为单位的数据包 进行管理。

​		可靠的传输服务是指，能够把数据准确可靠地传给对方。

​		一言以蔽之，TCP 协议为了更容易传送大数据才把数据分割，而且 TCP 协议能够确认数据最终是否送达对方。

#### 确保数据能到达目标

​		为了准确无误地将数据送达目标处，TCP 协议采用了三次握手（three-way handshaking）策略。握手过程中使用了 TCP 的标志：SYN（synchronize）和 ACK（acknowledgement）。

1. 发送端首先发送一个带 SYN 标志的数据包给对方。
2. 接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。
3. 最后，发送端再回传一个带 ACK 标志的数据包，代表握手结束。

​        除了三次握手，TCP 协议还有其他各种手段来保证通信的可靠性。



### 负责域名解析的 DNS 服务

​		DNS 服务是和 HTTP 协议一样位于应用层的协议。它提供域名到 IP 地址的解析服务。

​		计算机既可以被赋予 IP 地址，也可以被赋予主机名和域名。

​		用户通常使用主机名或域名来访问对方的计算机，因为比一串数字的 IP 地址好记。但计算机只认识数字。

​		为了解决上述问题，DNS 服务应运而生。DNS 协议提供通过域名查找 IP 地址，或逆向从 IP 地址反查域名的服务。



## URI 和 URL

​		与 URI（统一资源标识符）相比，我们更熟悉 URL（Uniform Resource Locator，统一资源定位符）。URL 正是使用 Web 浏览器等访问 Web 页面时需要输入的网页地址。

### 统一资源标识符

​		URI 是 Uniform Resource Identifier 的缩写。RFC2396 分别对这 3 个单词进行了如下定义：

- Uniform。规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文环境来识别资源指定的访问方式。另外，加入新增的协议方案（如 http: 或 ftp:）也更容易。
- Resource。资源的定义是 ”可标识的任何东西“。不仅是文档文件，图像或服务等能够区别于其他类型的，全都可作为资源。另外资源不仅可以是单一的，也可以是多数的集合体。
- Identifier。表示可标识的对象。也称为标识符。

​        综上所述，URI 就是由某个协议方案表示的资源的定位符标识。协议方案是指访问资源所使用的协议类型名称。

​		采用 HTTP 协议时，协议方案就是 http。

​		URI 用字符串标识某一互联网资源，而 URL 表示资源的地点（互联网上所处的位置）。可见 URL 是 URI 的子集。

### URI 格式

​		要表示指定的 URI，要使用涵盖全部必要信息的绝对 URI、绝对 URL 以及相对 URL。